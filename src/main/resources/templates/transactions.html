<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
  <meta charset="UTF-8">
  <meta
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
      name="viewport">
  <meta content="ie=edge" http-equiv="X-UA-Compatible">
  <title>Thymeleaf Form handling Demo</title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css"
        rel="stylesheet">
</head>
<body class="container">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <span class="navbar-brand mb-0 h1">Shakespeare's Bank</span>
  <div class="navbar-nav">
    <a class="nav-link" sec:authorize="isAuthenticated()" th:href="@{/logout}">Logout</a>
  </div>
</nav>

<h1 class="py-5">Bank Transactions</h1>
<form class="col card p-3 mb-5" method="post" th:action="@{/transactions/}"
      th:object="${txnInfo}">
  <div class="form-group">
    <label for="amount">Amount</label>
    <input class="form-control" id="amount" placeholder="Enter Amount" required
           th:field="*{amount}"
           type="number" min="0.00" step="0.01" max="4294967295.99"/>
  </div>

  <div class="form-group">
    <label for="txnType">Transaction Type</label>
    <select class="form-control " id="txnType" required th:field="*{txnType}">
      <option hidden value="">Select a transaction type</option>
      <option
          th:each="txn : ${T(com.shakespeares.monkeys.app.model.TxnType).values()}"
          th:text="${txn}"
          th:value="${txn}">
      </option>
    </select>
  </div>
  <input class="btn btn-primary" type="submit" value="Create Transaction">
</form>
<table class="table table-striped table-bordered">
  <tr>
    <th>Id</th>
    <th>Amount</th>
    <th>Transaction Type</th>
    <th>Transaction Date</th>
    <th>Balance</th>
    <th>Status</th>
  </tr>
  <tr th:if="${#lists.isEmpty(txns)}">
    <td colspan="6">No Transactions Found.</td>
  </tr>
  <tr th:each="txn : ${txns}">
    <td th:text="${txn.id}"></td>
    <td th:text="${txn.amount}"></td>
    <td th:text="${txn.txnType}"></td>
    <td th:text="${txn.createdAt}"></td>
    <td th:text="${txn.balance}"></td>
    <td th:text="${txn.status}"></td>
  </tr>
</table>
</body>
</html>